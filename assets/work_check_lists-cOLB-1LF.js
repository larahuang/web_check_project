import{d as R,u as z,i as G,s as T,h as n,j as m,k as J,r as K,o as u,a as r,b as a,t as s,f,l as X,v as Z,m as v,F as k,e as D,p as ee,q as te,g as ae,c as le,T as se,E as oe,x}from"./index-BhuNl8kn.js";import{_ as ne,a as ue}from"./Pagination.vue_vue_type_script_setup_true_lang-Dobiq9kx.js";const re={class:"title"},ce={class:"tableContainer"},de={class:"table w-full"},ie={key:0},ve={key:1},pe={"data-title":"姓名"},ge={"data-title":"出勤"},he={key:0,style:{color:"red"}},_e={key:1,style:{color:"green"}},me={"data-title":"座標"},fe={"data-title":"id"},ke={"data-title":"打卡日期"},be=["onClick"],Pe=a("i",{class:"fa-solid fa-trash-can"},null,-1),ye=R({__name:"work_check_lists",setup(Ce){const b=z(),P=G();T(b);const{getPageClass:w,changeTitleTag:W}=b,{modalWidth:y,uniqueId:p,allWorkLists:g}=T(P),{getAllDayWork:C}=P,N=n("pageWorkCheckLists");localStorage.setItem("pageClass",N.value);const h=n("出勤列表"),O={"Content-Type":"application/json",Accept:"application/json"};localStorage.setItem("pageName",h.value);const j=n(["項目","姓名","出勤","座標","ip","打卡時間","操作"]),c=n(""),o=n(1),d=n(10),E=e=>{console.log(e),d.value=e,i.value=e+"筆"},$=n([{value:"10",label:"10筆"},{value:"15",label:"15筆"},{value:"20",label:"20筆"},{value:"30",label:"30筆"},{value:"40",label:"40筆"},{value:"50",label:"50筆"}]),i=n("10筆"),I=m(()=>{let e=g.value;return c.value===""||(c.value=c.value.trim(),e=e.filter(function(l){if(l.title.indexOf(c.value)!==-1)return l})),e}),V=m(()=>Math.ceil(I.value.length/d.value)),A=n(1),B=m(()=>{const e=o.value*d.value-d.value;return A.value=e,I.value.slice(e,e+d.value)}),L=()=>{o.value>1&&o.value--},Y=()=>{o.value<V.value&&o.value++},q=e=>{e===null?o.value=1:o.value=e},_=n(!1),F=e=>{y.value="550",e._id?p.value=e._id:p.value="",_.value=!0},M=()=>{_.value=!1},H=async()=>{try{const e=`https://node-mondb-api-project.vercel.app/api/workChecks/${p.value}`;await fetch(e,{method:"DELETE",headers:O}).then(l=>l.json()).then(l=>{console.log(l),C(),M()})}catch(e){oe.error(e)}};return J(()=>{w(),W(h.value),C()}),(e,l)=>{const U=K("el-input");return u(),r(k,null,[a("div",null,[a("div",re,[a("b",null,s(h.value),1)]),f(U,{class:"mt-3",modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=t=>c.value=t)},null,8,["modelValue"])]),X(a("div",ce,[a("table",de,[a("thead",null,[a("tr",null,[(u(!0),r(k,null,D(j.value,t=>(u(),r("th",{class:"bg-sky-200 border-sky-600",key:t},s(t),1))),128))])]),a("tbody",null,[(u(!0),r(k,null,D(B.value,(t,S,Q)=>(u(),r("tr",{class:"hover:bg-sky-50 focus:bg-sky-50",key:Q},[a("td",null,[o.value===1?(u(),r("div",ie,s(S+1),1)):(u(),r("div",ve,s(d.value*(o.value-1)+S+1),1))]),a("td",pe,s(t.userName),1),a("td",ge,[t.title==="上班遲到"||t.title==="下班早退"?(u(),r("span",he,s(t.title),1)):(u(),r("span",_e,s(t.title),1))]),a("td",me,s(t.lat)+" /"+s(t.lng),1),a("td",fe,s(t.ip),1),a("td",ke,s(v(ee)(t.start).format("YYYY-MM-DD THH:mm")),1),a("td",null,[a("a",{onClick:te(Ie=>F(t),["prevent"]),class:"btn bg-red-500 text-white hover:bg-red-800"},[Pe,ae(" 刪除 ")],8,be)])]))),128))])])],512),[[Z,v(g).length>0]]),f(ne,{currentPage:o.value,onSendPrevPage:L,totalPages:V.value,onSendItActive:q,sendNextPage:Y,totalItem:v(g).length,onSendChangeItemsPerPage:E,pageValue:i.value,modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=t=>i.value=t),pagePerOptions:$.value},null,8,["currentPage","totalPages","totalItem","pageValue","modelValue","pagePerOptions"]),(u(),le(se,{to:"body"},[f(ue,{isOpen:_.value,modalWidth:v(y),onSendCloseModal:M,onSendDeleteModeItem:H},null,8,["isOpen","modalWidth"])]))],64)}}});typeof x=="function"&&x(ye);export{ye as default};
