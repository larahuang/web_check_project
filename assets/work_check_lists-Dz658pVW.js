import{d as L,u as F,s as H,h as s,i as m,j as U,r as z,o as r,a as d,b as t,t as o,f as _,k as Q,v as R,l as v,F as f,e as C,m as G,p as J,g as K,c as X,T as Z,E as ee,q as D}from"./index-COgTxGpM.js";import{_ as te,a as ae}from"./Pagination.vue_vue_type_script_setup_true_lang-BJLzCG4f.js";const le={class:"title"},se={class:"tableContainer"},oe={class:"table w-full"},ne={"data-title":"姓名"},ue={"data-title":"出勤"},re={"data-title":"座標"},ce={"data-title":"id"},de={"data-title":"打卡日期"},ie=["onClick"],ve=t("i",{class:"fa-solid fa-trash-can"},null,-1),pe=L({__name:"work_check_lists",setup(ge){const k=F(),{modalWidth:b,uniqueId:p,allWorkLists:g}=H(k),{getAllDayWork:P}=k,y=s("出勤列表"),x={"Content-Type":"application/json",Accept:"application/json"};localStorage.setItem("pageName",y.value);const S=s(["項目","姓名","出勤","座標","ip","打卡時間","操作"]),u=s(""),n=s(1),c=s(10),w=e=>{console.log(e),c.value=e,i.value=e+"筆"},T=s([{value:"10",label:"10筆"},{value:"15",label:"15筆"},{value:"20",label:"20筆"},{value:"30",label:"30筆"},{value:"40",label:"40筆"},{value:"50",label:"50筆"}]),i=s("10筆"),I=m(()=>{let e=g.value;return u.value===""||(u.value=u.value.trim(),e=e.filter(function(l){if(l.title.indexOf(u.value)!==-1)return l})),e}),V=m(()=>Math.ceil(I.value.length/c.value)),N=s(1),O=m(()=>{const e=n.value*c.value-c.value;return N.value=e,I.value.slice(e,e+c.value)}),W=()=>{n.value>1&&n.value--},j=()=>{n.value<V.value&&n.value++},E=e=>{e===null?n.value=1:n.value=e},h=s(!1),$=e=>{b.value="550",e._id?p.value=e._id:p.value="",h.value=!0},M=()=>{h.value=!1},A=async()=>{try{const e=`https://api-quiz-project.vercel.app/api/workChecks/${p.value}`;await fetch(e,{method:"DELETE",headers:x}).then(l=>l.json()).then(l=>{console.log(l),P(),M()})}catch(e){ee.error(e)}};return U(()=>{P()}),(e,l)=>{const B=z("el-input");return r(),d(f,null,[t("div",null,[t("div",le,[t("b",null,o(y.value),1)]),_(B,{class:"mt-3",modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=a=>u.value=a)},null,8,["modelValue"])]),Q(t("div",se,[t("table",oe,[t("thead",null,[t("tr",null,[(r(!0),d(f,null,C(S.value,a=>(r(),d("th",{class:"bg-sky-200 border-sky-600",key:a},o(a),1))),128))])]),t("tbody",null,[(r(!0),d(f,null,C(O.value,(a,Y,q)=>(r(),d("tr",{class:"hover:bg-sky-50 focus:bg-sky-50",key:q},[t("td",null,o(Y+1),1),t("td",ne,o(a.userName),1),t("td",ue,o(a.title),1),t("td",re,o(a.lat)+" /"+o(a.lng),1),t("td",ce,o(a.ip),1),t("td",de,o(v(G)(a.start).format("YYYY-MM-DD THH:mm")),1),t("td",null,[t("a",{onClick:J(he=>$(a),["prevent"]),class:"btn bg-red-500 text-white hover:bg-red-800"},[ve,K(" 刪除 ")],8,ie)])]))),128))])])],512),[[R,v(g).length>0]]),_(te,{currentPage:n.value,onSendPrevPage:W,totalPages:V.value,onSendItActive:E,sendNextPage:j,totalItem:v(g).length,onSendChangeItemsPerPage:w,pageValue:i.value,modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=a=>i.value=a),pagePerOptions:T.value},null,8,["currentPage","totalPages","totalItem","pageValue","modelValue","pagePerOptions"]),(r(),X(Z,{to:"body"},[_(ae,{isOpen:h.value,modalWidth:v(b),onSendCloseModal:M,onSendDeleteModeItem:A},null,8,["isOpen","modalWidth"])]))],64)}}});typeof D=="function"&&D(pe);export{pe as default};
