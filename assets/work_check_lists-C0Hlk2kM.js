import{d as Q,u as R,i as G,s as T,h as o,j as m,k as J,r as K,o as u,a as r,b as t,t as n,f,l as X,v as Z,m as v,F as k,e as D,p as ee,q as te,g as ae,c as le,T as se,E as oe,x}from"./index-Vvt8a9So.js";import{_ as ne,a as ue}from"./Pagination.vue_vue_type_script_setup_true_lang-ZdeptEDG.js";const re={class:"title"},ce={class:"tableContainer"},ie={class:"table w-full"},de={key:0},ve={key:1},pe={"data-title":"姓名"},ge={"data-title":"出勤"},he={"data-title":"座標"},_e={"data-title":"id"},me={"data-title":"打卡日期"},fe=["onClick"],ke=t("i",{class:"fa-solid fa-trash-can"},null,-1),Pe=Q({__name:"work_check_lists",setup(be){const P=R(),b=G();T(P);const{getPageClass:w,changeTitleTag:W}=P,{modalWidth:y,uniqueId:p,allWorkLists:g}=T(b),{getAllDayWork:C}=b,N=o("pageWorkCheckLists");localStorage.setItem("pageClass",N.value);const h=o("出勤列表"),O={"Content-Type":"application/json",Accept:"application/json"};localStorage.setItem("pageName",h.value);const j=o(["項目","姓名","出勤","座標","ip","打卡時間","操作"]),c=o(""),s=o(1),i=o(10),E=e=>{console.log(e),i.value=e,d.value=e+"筆"},$=o([{value:"10",label:"10筆"},{value:"15",label:"15筆"},{value:"20",label:"20筆"},{value:"30",label:"30筆"},{value:"40",label:"40筆"},{value:"50",label:"50筆"}]),d=o("10筆"),I=m(()=>{let e=g.value;return c.value===""||(c.value=c.value.trim(),e=e.filter(function(l){if(l.title.indexOf(c.value)!==-1)return l})),e}),V=m(()=>Math.ceil(I.value.length/i.value)),A=o(1),B=m(()=>{const e=s.value*i.value-i.value;return A.value=e,I.value.slice(e,e+i.value)}),L=()=>{s.value>1&&s.value--},Y=()=>{s.value<V.value&&s.value++},q=e=>{e===null?s.value=1:s.value=e},_=o(!1),F=e=>{y.value="550",e._id?p.value=e._id:p.value="",_.value=!0},M=()=>{_.value=!1},H=async()=>{try{const e=`https://api-quiz-project.vercel.app/api/workChecks/${p.value}`;await fetch(e,{method:"DELETE",headers:O}).then(l=>l.json()).then(l=>{console.log(l),C(),M()})}catch(e){oe.error(e)}};return J(()=>{w(),W(h.value),C()}),(e,l)=>{const U=K("el-input");return u(),r(k,null,[t("div",null,[t("div",re,[t("b",null,n(h.value),1)]),f(U,{class:"mt-3",modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=a=>c.value=a)},null,8,["modelValue"])]),X(t("div",ce,[t("table",ie,[t("thead",null,[t("tr",null,[(u(!0),r(k,null,D(j.value,a=>(u(),r("th",{class:"bg-sky-200 border-sky-600",key:a},n(a),1))),128))])]),t("tbody",null,[(u(!0),r(k,null,D(B.value,(a,S,z)=>(u(),r("tr",{class:"hover:bg-sky-50 focus:bg-sky-50",key:z},[t("td",null,[s.value===1?(u(),r("div",de,n(S+1),1)):(u(),r("div",ve,n(i.value*(s.value-1)+S+1),1))]),t("td",pe,n(a.userName),1),t("td",ge,n(a.title),1),t("td",he,n(a.lat)+" /"+n(a.lng),1),t("td",_e,n(a.ip),1),t("td",me,n(v(ee)(a.start).format("YYYY-MM-DD THH:mm")),1),t("td",null,[t("a",{onClick:te(ye=>F(a),["prevent"]),class:"btn bg-red-500 text-white hover:bg-red-800"},[ke,ae(" 刪除 ")],8,fe)])]))),128))])])],512),[[Z,v(g).length>0]]),f(ne,{currentPage:s.value,onSendPrevPage:L,totalPages:V.value,onSendItActive:q,sendNextPage:Y,totalItem:v(g).length,onSendChangeItemsPerPage:E,pageValue:d.value,modelValue:d.value,"onUpdate:modelValue":l[1]||(l[1]=a=>d.value=a),pagePerOptions:$.value},null,8,["currentPage","totalPages","totalItem","pageValue","modelValue","pagePerOptions"]),(u(),le(se,{to:"body"},[f(ue,{isOpen:_.value,modalWidth:v(y),onSendCloseModal:M,onSendDeleteModeItem:H},null,8,["isOpen","modalWidth"])]))],64)}}});typeof x=="function"&&x(Pe);export{Pe as default};
