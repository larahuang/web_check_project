import{d as Q,u as R,i as G,s as S,h as s,j as _,k as J,r as K,o as r,a as i,b as t,t as o,f,l as X,v as Z,m as v,F as k,e as T,p as ee,q as te,g as ae,c as le,T as se,E as oe,x}from"./index-CcLZyVoS.js";import{_ as ne,a as ue}from"./Pagination.vue_vue_type_script_setup_true_lang-CAm0U4kR.js";const re={class:"title"},ce={class:"tableContainer"},ie={class:"table w-full"},de={"data-title":"姓名"},ve={"data-title":"出勤"},pe={"data-title":"座標"},ge={"data-title":"id"},he={"data-title":"打卡日期"},me=["onClick"],_e=t("i",{class:"fa-solid fa-trash-can"},null,-1),fe=Q({__name:"work_check_lists",setup(ke){const P=R(),b=G();S(P);const{getPageClass:D,changeTitleTag:w}=P,{modalWidth:y,uniqueId:p,allWorkLists:g}=S(b),{getAllDayWork:C}=b,W=s("pageWorkCheckLists");localStorage.setItem("pageClass",W.value);const h=s("出勤列表"),N={"Content-Type":"application/json",Accept:"application/json"};localStorage.setItem("pageName",h.value);const O=s(["項目","姓名","出勤","座標","ip","打卡時間","操作"]),u=s(""),n=s(1),c=s(10),j=e=>{console.log(e),c.value=e,d.value=e+"筆"},E=s([{value:"10",label:"10筆"},{value:"15",label:"15筆"},{value:"20",label:"20筆"},{value:"30",label:"30筆"},{value:"40",label:"40筆"},{value:"50",label:"50筆"}]),d=s("10筆"),I=_(()=>{let e=g.value;return u.value===""||(u.value=u.value.trim(),e=e.filter(function(l){if(l.title.indexOf(u.value)!==-1)return l})),e}),V=_(()=>Math.ceil(I.value.length/c.value)),$=s(1),A=_(()=>{const e=n.value*c.value-c.value;return $.value=e,I.value.slice(e,e+c.value)}),B=()=>{n.value>1&&n.value--},L=()=>{n.value<V.value&&n.value++},Y=e=>{e===null?n.value=1:n.value=e},m=s(!1),q=e=>{y.value="550",e._id?p.value=e._id:p.value="",m.value=!0},M=()=>{m.value=!1},F=async()=>{try{const e=`https://api-quiz-project.vercel.app/api/workChecks/${p.value}`;await fetch(e,{method:"DELETE",headers:N}).then(l=>l.json()).then(l=>{console.log(l),C(),M()})}catch(e){oe.error(e)}};return J(()=>{D(),w(h.value),C()}),(e,l)=>{const H=K("el-input");return r(),i(k,null,[t("div",null,[t("div",re,[t("b",null,o(h.value),1)]),f(H,{class:"mt-3",modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=a=>u.value=a)},null,8,["modelValue"])]),X(t("div",ce,[t("table",ie,[t("thead",null,[t("tr",null,[(r(!0),i(k,null,T(O.value,a=>(r(),i("th",{class:"bg-sky-200 border-sky-600",key:a},o(a),1))),128))])]),t("tbody",null,[(r(!0),i(k,null,T(A.value,(a,U,z)=>(r(),i("tr",{class:"hover:bg-sky-50 focus:bg-sky-50",key:z},[t("td",null,o(U+1),1),t("td",de,o(a.userName),1),t("td",ve,o(a.title),1),t("td",pe,o(a.lat)+" /"+o(a.lng),1),t("td",ge,o(a.ip),1),t("td",he,o(v(ee)(a.start).format("YYYY-MM-DD THH:mm")),1),t("td",null,[t("a",{onClick:te(Pe=>q(a),["prevent"]),class:"btn bg-red-500 text-white hover:bg-red-800"},[_e,ae(" 刪除 ")],8,me)])]))),128))])])],512),[[Z,v(g).length>0]]),f(ne,{currentPage:n.value,onSendPrevPage:B,totalPages:V.value,onSendItActive:Y,sendNextPage:L,totalItem:v(g).length,onSendChangeItemsPerPage:j,pageValue:d.value,modelValue:d.value,"onUpdate:modelValue":l[1]||(l[1]=a=>d.value=a),pagePerOptions:E.value},null,8,["currentPage","totalPages","totalItem","pageValue","modelValue","pagePerOptions"]),(r(),le(se,{to:"body"},[f(ue,{isOpen:m.value,modalWidth:v(y),onSendCloseModal:M,onSendDeleteModeItem:F},null,8,["isOpen","modalWidth"])]))],64)}}});typeof x=="function"&&x(fe);export{fe as default};
