import{d as L,u as F,s as H,g as s,i as h,j as U,r as z,o as r,a as d,h as a,t as o,e as f,k as Q,v as R,l as v,F as _,b as C,m as G,p as J,f as K,c as X,T as Z,E as ee,q as D}from"./index-BV0MUO1B.js";import{_ as ae,a as te}from"./Pagination.vue_vue_type_script_setup_true_lang-KugMQ-k5.js";const le={class:"title"},se={class:"tableContainer"},oe={class:"table-auto w-full"},ne={"data-name":"打卡日期"},ue=["onClick"],re=a("i",{class:"fa-solid fa-trash-can"},null,-1),ce=L({__name:"work_check_lists",setup(de){const k=F(),{modalWidth:b,uniqueId:p,allWorkLists:g}=H(k),{getAllDayWork:P}=k,y=s("出勤列表"),x={"Content-Type":"application/json",Accept:"application/json"};localStorage.setItem("pageName",y.value);const S=s(["項目","姓名","辦公室","座標","ip","打卡時間","操作"]),u=s(""),n=s(1),c=s(10),w=e=>{console.log(e),c.value=e,i.value=e+"筆"},T=s([{value:"10",label:"10筆"},{value:"15",label:"15筆"},{value:"20",label:"20筆"},{value:"30",label:"30筆"},{value:"40",label:"40筆"},{value:"50",label:"50筆"}]),i=s("10筆"),I=h(()=>{let e=g.value;return u.value===""||(u.value=u.value.trim(),e=e.filter(function(l){if(l.title.indexOf(u.value)!==-1)return l})),e}),V=h(()=>Math.ceil(I.value.length/c.value)),N=s(1),O=h(()=>{const e=n.value*c.value-c.value;return N.value=e,I.value.slice(e,e+c.value)}),W=()=>{n.value>1&&n.value--},j=()=>{n.value<V.value&&n.value++},E=e=>{e===null?n.value=1:n.value=e},m=s(!1),$=e=>{b.value="550",e._id?p.value=e._id:p.value="",m.value=!0},M=()=>{m.value=!1},A=async()=>{try{const e=`https://api-quiz-project.vercel.app/api/workChecks/${p.value}`;await fetch(e,{method:"DELETE",headers:x}).then(l=>l.json()).then(l=>{console.log(l),P(),M()})}catch(e){ee.error(e)}};return U(()=>{P()}),(e,l)=>{const B=z("el-input");return r(),d(_,null,[a("div",null,[a("div",le,o(y.value),1),f(B,{class:"mt-3",modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=t=>u.value=t)},null,8,["modelValue"])]),Q(a("div",se,[a("table",oe,[a("thead",null,[a("tr",null,[(r(!0),d(_,null,C(S.value,t=>(r(),d("th",{class:"bg-sky-200 border-sky-600",key:t},o(t),1))),128))])]),a("tbody",null,[(r(!0),d(_,null,C(O.value,(t,Y,q)=>(r(),d("tr",{class:"hover:bg-sky-50 focus:bg-sky-50",key:q},[a("td",null,o(Y+1),1),a("td",null,o(t.userName),1),a("td",null,o(t.title),1),a("td",null,o(t.lat)+" /"+o(t.lng),1),a("td",null,o(t.ip),1),a("td",ne,o(v(G)(t.start).format("YYYY-MM-DD THH:mm")),1),a("td",null,[a("a",{onClick:J(ie=>$(t),["prevent"]),class:"btn bg-red-500 text-white hover:bg-red-800"},[re,K(" 刪除 ")],8,ue)])]))),128))])])],512),[[R,v(g).length>0]]),f(ae,{currentPage:n.value,onSendPrevPage:W,totalPages:V.value,onSendItActive:E,sendNextPage:j,totalItem:v(g).length,onSendChangeItemsPerPage:w,pageValue:i.value,modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=t=>i.value=t),pagePerOptions:T.value},null,8,["currentPage","totalPages","totalItem","pageValue","modelValue","pagePerOptions"]),(r(),X(Z,{to:"body"},[f(te,{isOpen:m.value,modalWidth:v(b),onSendCloseModal:M,onSendDeleteModeItem:A},null,8,["isOpen","modalWidth"])]))],64)}}});typeof D=="function"&&D(ce);export{ce as default};
